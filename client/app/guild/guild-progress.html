<div ng-include="'app/guild/guild-read-header.html'"></div>
<div class="guild-read">
    <div class="container">
        <div ng-include="'app/guild/guild-read-intro.html'"></div>
        <div class="row" ng-repeat="difficulty in difficulties">
            <div class="col-md-12">
                <h2>{{difficulty|uppercase|translate}} - {{progress[difficulty+'Count']}}/{{__env.tiers[__env.tiers.current].bosses.length}}</h2>
                <uib-accordion close-others="oneAtATime">

                    <div uib-accordion-group class="panel-default" heading="{{boss}}"
                         ng-repeat="(boss, kills) in progress[difficulty]">
                        <div class="row">
                            <div class="col-md-12">
                                <uib-tabset type="pills">
                                    <uib-tab class="m-r-10" index="0" heading="{{kills.timestamps.length}} kill(s) recorded">
                                        <div ng-repeat="timestamp in kills.timestamps">
                                            <div class="m-10">
                                                <div class="m-b-5 cursor-pointer"
                                                     ng-click="showRoster =!showRoster;loadRoster(difficulty,boss,timestamp)">
                                                    {{timestamp[0]| amDateFormat:'LLLL'}} <span ng-show="$first">(First kill)</span>
                                                </div>
                                                <div ng-show="showRoster">
                                                    Roster size : {{roster[timestamp.join('')].length}}
                                                    <table class="table table-condensed table-striped">
                                                        <tr ng-repeat="player in roster[timestamp.join('')]">
                                                            <td class="class-{{player.characterClass}}">
                                                                {{player.characterName}}
                                                            </td>
                                                            <td>{{player.characterSpec}}</td>
                                                            <td>{{player.characterRole}}</td>
                                                            <td>{{player.characterAverageItemLevelEquipped}}</td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </uib-tab>
                                    <uib-tab index="1"
                                             heading="{{kills.irrelevantTimestamps.length}} irrelevant kill(s) recorded">
                                        <div ng-repeat="timestamp in kills.irrelevantTimestamps">
                                            <div class="m-10">
                                                <div class="m-b-5 cursor-pointer"
                                                     ng-click="showRoster =!showRoster;loadRoster(difficulty,boss,timestamp)">
                                                    {{timestamp[0]| amDateFormat:'LLLL'}}
                                                </div>
                                                <div ng-show="showRoster">
                                                    Roster size : {{roster[timestamp.join('')].length}}
                                                    <table class="table table-condensed table-striped">
                                                        <tr ng-repeat="player in roster[timestamp.join('')]">
                                                            <td class="class-{{player.characterClass}}">
                                                                {{player.characterName}}
                                                            </td>
                                                            <td>{{player.characterSpec}}</td>
                                                            <td>{{player.characterRole}}</td>
                                                            <td>{{player.characterAverageItemLevelEquipped}}</td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </uib-tab>
                                </uib-tabset>
                            </div>
                        </div>

                    </div>

                </uib-accordion>


            </div>

        </div>
    </div>
</div>